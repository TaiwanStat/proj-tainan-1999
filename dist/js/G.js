function _select(e){this.last=this.now,this.now=$("#"+e),this.last.toggleClass("disable"),this.now.toggleClass("disable"),window.location.hash=e}function _getAreasData(e,t,a){function r(e){var t=e;return"妨礙安寧"===t?t="妨害安寧":"路面油漬"==t?t="市區道路路面油漬":"公車動態LED跑馬燈資訊顯示異常"===t&&(t="公車動態 LED 跑馬燈資訊異常"),t}var s=[];for(a=a||[];0!==a.length;){var n=a.pop(),i=getAPIsearch(e,t,n),o=[];i.ListData.forEach(function(e,t){o.push({description:e.description,status:e.status,serviceName:e.service_name,serviceRequestId:e.service_request_id,serviceItems:r(e.subproject),requestedTime:e.requested_datetime,finishedTime:e.updated_datetime,area:e.area})}),s.push({area:n,caseCount:i.CaseCount,listData:o}),console.log(n)}return s}function _getItemsData(e,t,a){var r=[],s=this.getAreasData(e,t,a);return initItemArray(r),s.forEach(function(e,t){e.listData.forEach(function(e,t){var t=DB.serviceItems.indexOf(e.serviceItems);t===-1?(console.log(e),console.log(e.serviceItems)):(r[t].caseCount++,r[t].listData.push(e))})}),r}function initItemArray(e){return DB.serviceItems.forEach(function(t,a){e.push({item:t,caseCount:0,listData:[]})}),e}function getAPIsearch(e,t,a,r){var s={},n={QFPlanStartDateS:e,QFPlanStartDateE:t,QUArea:a};return r=r||!1,r&&(n.QUMainItems=r),$.ajax({contentType:"application/json; charset=utf-8",url:DB.url+"servicerequestsquery",headers:{Authorization:DB.key},async:!1,type:"POST",dataType:"json",data:JSON.stringify(n),success:function(e,t,a){s=e},error:function(e,t,a){console.log("Error in Operation\n"+t+a)}}),s}function getAPIone(e){var t={};return $.ajax({contentType:"application/json; charset=utf-8",url:DB.url+"servicerequestquery/"+e,headers:{Authorization:DB.key},async:!1,type:"Get",success:function(e,a,r){t=e},error:function(e,t,a){console.log("Error in Operation\n"+t+a)}}),t}var G={last:$("#overview"),now:$("#overview"),select:_select,colorServiceName:[],colorServiceItem:[],getAreasData:_getAreasData,getItemsData:_getItemsData},DB={key:"0x8209A3AA4B5607A5C644BE908F83A350361A8B8ECFCDCCE5E105379B92C62F1E",url:"http://1999.tainan.gov.tw:83/api/",areasTotal:37,areas:[],serviceName:[],serviceItems:[],monthAreaData:[],monthItemsData:[]};G.colorServiceName=["#E57373","#DCE775","#F06292","#BA68C8","#7986CB","#4DB6AC","#81C784","#FF8A65","#A1887F"],G.colorServiceItem=["#E57373","#D4E157","#CDDC39","#AB47BC","#8E24AA","#BA68C8","#9FA8DA","#7986CB","#5C6BC0","#3F51B5","#3949AB","#303F9F","#283593","#1A237E","#B2DFDB","#4DB6AC","#009688","#00796B","#004D40","#A5D6A7","#81C784","#66BB6A","#66BB6A","#43A047","#388E3C","#2E7D32","#FFCCBC","#FF8A65","#FF5722","#E64A19","#BF360C","#8D6E63","#6D4C41"],DB.areas=["新化區","新營區","鹽水區","白河區","柳營區","後壁區","東山區","麻豆區","下營區","六甲區","官田區","大內區","佳里區","學甲區","西港區","七股區","將軍區","北門區","善化區","新市區","安定區","山上區","玉井區","楠西區","南化區","左鎮區","仁德區","歸仁區","關廟區","龍崎區","永康區","東區","南區","北區","中西區","安南區","安平區"],DB.serviceName=["違規停車","路燈故障","噪音舉發","騎樓舉發","道路維修","交通運輸","髒亂及污染","民生管線","動物救援"],DB.serviceItems=["違規停車","9盞以下路燈故障","10盞以上路燈故障","妨害安寧","場所連續噪音","騎樓舉發","路面坑洞","寬頻管線、孔蓋損壞","路面下陷、凹陷","路面掏空、塌陷","路樹傾倒","地下道積水","人孔蓋聲響、凹陷、漏水","人孔蓋凹陷坑洞","號誌故障","號誌秒差調整","公車動態 LED 跑馬燈資訊異常","交通疏導","佔用道路","空氣汙染","其他汙染舉發","環境髒亂","道路散落物","小廣告、旗幟","大型廢棄物清運","市區道路路面油漬","電信孔蓋鬆動、電信線路掉落、電信桿傾倒","停電、漏電、電線掉落、孔蓋鬆動","漏水、停水、消防栓漏水或損壞","天然氣外洩","瓦斯管溝修補、孔蓋鬆動","遊蕩犬隻捕捉管制","犬貓急難救援"];